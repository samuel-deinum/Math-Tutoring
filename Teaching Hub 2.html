<!doctype html>

<html>

<head>

    <style type="text/css">
        #container {

            height: 620px;/*400px*/
            width: 1100px;/*560px*/
            border: black solid;
            display: inline-block;
            overflow: hidden;
        }

        .control {
            display: inline-block;
            border: black solid;
            width: 200px;
            height: 620px;
            vertical-align: top;
        }

        #app {
            display: inline;
        }

        .butt {
            margin: 5px;
            height: 40px;
            width: 60px;
            display: inline-block;
        }

        .testButton {
            margin: 5px;
            height: 40px;
            width: 40px;
            display: inline-block;
        }

        .itDisplay{
            margin: 0px;
            height: 40px;
            width: 40px;
            display: inline-block;
        }

        #svgs {
            width: 90%;
            height: 30%;
            margin: auto;
            overflow-y: auto;
        }

        #svgProps{
            width: 90%;
            height: 33%;
            margin: auto;
            overflow-y: auto;
        }

        .svgDiv {
            display: inline-block;
            margin: 5px;
        }

        svg {
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        svg::selection {
            background: none;
        }
    </style>


</head>

<body>

    <div id="app">

        <div class="control">
            <button onclick="save()" class="butt">Save</button>
            <button onclick="editSave()" class="butt">Edit</button><br>
            <button onclick="seriesTestBack()" class="testButton">&lt</button>
            <div id="iterations" class="itDisplay"></div>
            <div id="totalIterations" class="itDisplay">1</div>
            <button onclick="seriesTest()" class="testButton">&gt</button>
            <div id="svgs"></div>
            <div id="svgProps"></div>
            <button onclick="setShape()" class="butt">Set</button>
            <button onclick="editSetShape()" class="butt">editSet</button>
            <button onclick="viewAll()" class="butt">View</button>
            <button onclick="objectExport()" class="butt">Export</button>
        </div>
        <div id="container"></div>
    </div>

    <script>


        //mSVG Object
        var mSVG = {
            equal: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                var svgNS = svg.namespaceURI;

                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "0%");
                rect.setAttribute('y', "20%");
                rect.setAttribute('width', "100%");
                rect.setAttribute('height', "20%");
                rect.setAttribute('fill', fill);
                svg.appendChild(rect);

                var rect2 = document.createElementNS(svgNS, 'rect');
                rect2.setAttribute('x', "0%");
                rect2.setAttribute('y', "60%");
                rect2.setAttribute('width', "100%");
                rect2.setAttribute('height', "20%");
                rect2.setAttribute('fill', fill);

                svg.appendChild(rect2);
                box.appendChild(svg);
            },
            plus: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                var svgNS = svg.namespaceURI;

                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "0%");
                rect.setAttribute('y', "40%");
                rect.setAttribute('width', "100%");
                rect.setAttribute('height', "20%");
                rect.setAttribute('fill', fill);
                svg.appendChild(rect);

                var rect2 = document.createElementNS(svgNS, 'rect');
                rect2.setAttribute('x', "40%");
                rect2.setAttribute('y', "0%");
                rect2.setAttribute('width', "20%");
                rect2.setAttribute('height', "100%");
                rect2.setAttribute('fill', fill);

                svg.appendChild(rect2);
                box.appendChild(svg);
            },
            minus: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                var svgNS = svg.namespaceURI;

                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "0%");
                rect.setAttribute('y', "40%");
                rect.setAttribute('width', "100%");
                rect.setAttribute('height', "20%");
                rect.setAttribute('fill', fill);
                svg.appendChild(rect);

                box.appendChild(svg);
            },
            multiply: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var path1 = document.createElementNS(svgNS, 'path');
                path1.setAttribute('fill', fill);
                path1.setAttribute('d', "M14 0 L50 36 L86 0 L100 14 L64 50 L100 86 L86 100 L50 64 L14 100 L0 86 L36 50 L0 14 Z");
                svg.appendChild(path1);

                box.appendChild(svg);
            },
            devide: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                var svgNS = svg.namespaceURI;

                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "0%");
                rect.setAttribute('y', "40%");
                rect.setAttribute('width', "100%");
                rect.setAttribute('height', "20%");
                rect.setAttribute('fill', fill);
                svg.appendChild(rect);

                var circ1 = document.createElementNS(svgNS, 'circle');
                circ1.setAttribute('cx', "50%");
                circ1.setAttribute('cy', "10%");
                circ1.setAttribute('r', "10%");
                circ1.setAttribute('fill', fill);
                svg.appendChild(circ1);


                var circ2 = document.createElementNS(svgNS, 'circle');
                circ2.setAttribute('cx', "50%");
                circ2.setAttribute('cy', "90%");
                circ2.setAttribute('r', "10%");
                circ2.setAttribute('fill', fill);
                svg.appendChild(circ2);

                box.appendChild(svg);

            },
            bot: function (box, h, w, c, t) {
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(45 35,80)");
                ell.setAttribute('rx', "7");
                ell.setAttribute('ry', "14");
                ell.setAttribute('fill', "#2D6862");
                ell.setAttribute('cx', "35");
                ell.setAttribute('cy', "80");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(135 65,80)");
                ell.setAttribute('rx', "7");
                ell.setAttribute('ry', "14");
                ell.setAttribute('fill', "#2D6862");
                ell.setAttribute('cx', "65");
                ell.setAttribute('cy', "80");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(50 28,50)");
                ell.setAttribute('rx', "10");
                ell.setAttribute('ry', "20");
                ell.setAttribute('fill', "#B1FFFF");
                ell.setAttribute('cx', "28");
                ell.setAttribute('cy', "50");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(130 72,50)");
                ell.setAttribute('rx', "10");
                ell.setAttribute('ry', "20");
                ell.setAttribute('fill', "#B1FFFF");
                ell.setAttribute('cx', "72");
                ell.setAttribute('cy', "50");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "25");
                rect.setAttribute('y', "25");
                rect.setAttribute('width', "50");
                rect.setAttribute('height', "50");
                rect.setAttribute('fill', '#B1FFFF');
                rect.setAttribute('stroke', "#000");
                rect.setAttribute('stroke-width', ".4");
                svg.appendChild(rect);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "39");
                circ.setAttribute('cy', "40");
                circ.setAttribute('r', "11");
                circ.setAttribute('fill', '#FFFFFF');
                circ.setAttribute('stroke', "#000");
                circ.setAttribute('stroke-width', ".4");
                svg.appendChild(circ);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "61");
                circ.setAttribute('cy', "40");
                circ.setAttribute('r', "11");
                circ.setAttribute('fill', '#FFFFFF');
                circ.setAttribute('stroke', "#000");
                circ.setAttribute('stroke-width', ".4");
                svg.appendChild(circ);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "39.25");
                circ.setAttribute('cy', "39");
                circ.setAttribute('r', "8");
                circ.setAttribute('fill', '#000000');
                svg.appendChild(circ);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "60.75");
                circ.setAttribute('cy', "39");
                circ.setAttribute('r', "8");
                circ.setAttribute('fill', '#000000');
                svg.appendChild(circ);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('rx', "6");
                ell.setAttribute('ry', "4");
                ell.setAttribute('fill', "#000000");
                ell.setAttribute('cx', "50");
                ell.setAttribute('cy', "60");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);


                box.appendChild(svg);

            },
            botattena: function (box, h, w, c, t) {
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(45 35,80)");
                ell.setAttribute('rx', "7");
                ell.setAttribute('ry', "14");
                ell.setAttribute('fill', "#2D6862");
                ell.setAttribute('cx', "35");
                ell.setAttribute('cy', "80");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(135 65,80)");
                ell.setAttribute('rx', "7");
                ell.setAttribute('ry', "14");
                ell.setAttribute('fill', "#2D6862");
                ell.setAttribute('cx', "65");
                ell.setAttribute('cy', "80");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(50 28,50)");
                ell.setAttribute('rx', "10");
                ell.setAttribute('ry', "20");
                ell.setAttribute('fill', "#B1FFFF");
                ell.setAttribute('cx', "28");
                ell.setAttribute('cy', "50");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('transform', "rotate(130 72,50)");
                ell.setAttribute('rx', "10");
                ell.setAttribute('ry', "20");
                ell.setAttribute('fill', "#B1FFFF");
                ell.setAttribute('cx', "72");
                ell.setAttribute('cy', "50");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);


                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "47.5");
                rect.setAttribute('y', "5");
                rect.setAttribute('width', "5");
                rect.setAttribute('height', "20");
                rect.setAttribute('fill', '#EEFF9F');
                rect.setAttribute('stroke', "#000");
                rect.setAttribute('stroke-width', ".4");
                svg.appendChild(rect);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "50");
                circ.setAttribute('cy', "6");
                circ.setAttribute('r', "5");
                circ.setAttribute('fill', '#EEFF9F');
                circ.setAttribute('stroke', "#000");
                circ.setAttribute('stroke-width', ".4");
                svg.appendChild(circ);


                var rect = document.createElementNS(svgNS, 'rect');
                rect.setAttribute('x', "25");
                rect.setAttribute('y', "25");
                rect.setAttribute('width', "50");
                rect.setAttribute('height', "50");
                rect.setAttribute('fill', '#B1FFFF');
                rect.setAttribute('stroke', "#000");
                rect.setAttribute('stroke-width', ".4");
                svg.appendChild(rect);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "39");
                circ.setAttribute('cy', "40");
                circ.setAttribute('r', "11");
                circ.setAttribute('fill', '#FFFFFF');
                circ.setAttribute('stroke', "#000");
                circ.setAttribute('stroke-width', ".4");
                svg.appendChild(circ);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "61");
                circ.setAttribute('cy', "40");
                circ.setAttribute('r', "11");
                circ.setAttribute('fill', '#FFFFFF');
                circ.setAttribute('stroke', "#000");
                circ.setAttribute('stroke-width', ".4");
                svg.appendChild(circ);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "39.25");
                circ.setAttribute('cy', "39");
                circ.setAttribute('r', "8");
                circ.setAttribute('fill', '#000000');
                svg.appendChild(circ);

                var circ = document.createElementNS(svgNS, 'circle');
                circ.setAttribute('cx', "60.75");
                circ.setAttribute('cy', "39");
                circ.setAttribute('r', "8");
                circ.setAttribute('fill', '#000000');
                svg.appendChild(circ);

                var ell = document.createElementNS(svgNS, 'ellipse');
                ell.setAttribute('rx', "6");
                ell.setAttribute('ry', "4");
                ell.setAttribute('fill', "#000000");
                ell.setAttribute('cx', "50");
                ell.setAttribute('cy', "60");
                ell.setAttribute('stroke', "#000");
                ell.setAttribute('stroke-width', ".4");
                svg.appendChild(ell);


                box.appendChild(svg);

            },
            blackBox: function(box, h, w, c, t){
                box.style.backgroundColor = "black";
                box.style.height = h + "px";
                box.style.width = w + "px";
            },
            one: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 1;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            two: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 2;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            three: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 3;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            four: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 4;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            five: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 5;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            six: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 6;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            seven: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 7;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            eight: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 8;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            nine: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 9;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            zero: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
               
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = 0;
                svg.appendChild(text);

                box.appendChild(svg);
            },
            x: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = "x";
                svg.appendChild(text);

                box.appendChild(svg);
            },
            y: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
               
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '60');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = "y";
                svg.appendChild(text);

                box.appendChild(svg);
            },
            a: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = "a";
                svg.appendChild(text);

                box.appendChild(svg);
            },
            b: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = "b";
                svg.appendChild(text);

                box.appendChild(svg);
            },
            c: function (box, h, w, c, t) {
                if(c==null){
                    var fill = '#000000';
                }else{
                    var fill = c;
                }
                
                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute('width', h + "px");
                svg.setAttribute('height', h + "px");
                svg.setAttribute('viewBox', "0 0 100 100");
                var svgNS = svg.namespaceURI;

                var text = document.createElementNS(svgNS, 'text');
                text.setAttribute('x', '16');
                text.setAttribute('y', '97');
                text.setAttribute('fill', fill);
                text.setAttribute('font-family', 'bold');
                text.setAttribute('font-size', '140');
                text.textContent = "c";
                svg.appendChild(text);

                box.appendChild(svg);
            },
        }
        
        
        /*
                var test = document.createElement("div");
                mSVG.chars(test, 400,'b','#ebf441');
        
                document.getElementById("app").appendChild(test);
        */
        //Shapes to display on screen
        var shapes = [];
        var shapeElements = [];

        //Create Global variables (For Original)
        var TRACKER = -1;
        var offSetX = 0;
        var offSetY = 0;
        var lastX = 0;
        var lastY = 0;
        var wallLeft = 0;
        var wallRight = 0;
        var wallTop = 0;
        var wallBottom = 0;
        var top_z = 10;

        //Global Variables for Editor
        var shapeEdit = -1;

        //Container Properties
        var container = document.getElementById("container");
        var containerRect = container.getBoundingClientRect();
        var containerWidth = containerRect.right - containerRect.left;
        var containerHeight = containerRect.bottom - containerRect.top;
        var containerOffSetLeft = container.offsetLeft + container.scrollLeft + container.clientLeft;
        var containerOffSetTop = container.offsetTop + container.scrollTop + container.clientTop;

        //For iterations
        var iterations = 0;
        var testIteration = 0;

        var iterationDisplay = document.getElementById("iterations");
        iterationDisplay.innerHTML = testIteration;
        var totalIterationsDisplay = document.getElementById("totalIterations");
        totalIterationsDisplay.innerHTML = iterations;

        //For drag and Drop of new
        var newItem;

        //Fill SVGs div
        var svgsDiv = document.getElementById("svgs");
        var svgList = Object.getOwnPropertyNames(mSVG);

        //For setShape Function
        var setId = -1;

        //Fill svgEditor Editor (Shape Object Parameters are made here)
        for (i = 0; i < svgList.length; i++) {

            var svgDiv = document.createElement("div");
            svgDiv.className = "svgDiv";
            mSVG[svgList[i]](svgDiv, 40,40,"#000000","#");


            svgDiv.onmousedown = function (e) {
                var index = Array.prototype.indexOf.call(this.parentNode.children, this);

                var xs = [];
                var ys = [];
                var vs = [];
                var sxs = [];
                var sys = [];
                var rs = [];

                for (i = 1; i < iterations; i++) {
                    xs.push(0);
                    ys.push(0);
                    vs.push(0);
                    sxs.push(1);
                    sxs.push(1);
                    rs.push(0);
                }
                var newItem = {

                    id: shapes.length,
                    allignX: 5,
                    allignY: 5,
                    x: xs,
                    y: ys,
                    type: svgList[index],
                    height: 10,
                    width: 10,
                    visible:vs,
                    color:"#00000",
                    scaleX: sxs,
                    scaleY: sys,
                    rotate: rs
                }
                shapes.push(newItem);
                insertShape(newItem);
            }


            svgsDiv.appendChild(svgDiv);
        }

        //Fill svgProps
        var propsList = ["visible","color","scaleX","scaleY","rotate"];
        for(i=0;i<propsList.length;i++){          
            var propLabel = document.createElement("label");
            propLabel.innerHTML = propsList[i];
            var propInput = document.createElement("input");
            propInput.type = "text";
            propInput.id = "prop"+i;
            propInput.className = "propInput";
            //propInput.value = shapes[id][propsList[i]][iterations];
            //console.log(shapes[id][propsList[i]]);
            propLabel.appendChild(propInput);
            document.getElementById("svgProps").appendChild(propLabel);
        }

        function fillsvgProps(id){
            setId = id;
            var propInputs = document.getElementById("svgProps").getElementsByClassName("propInput");
            for(i=0;i<propInputs.length;i++){
                if(i==1){ //Color is not an array
                    propInputs[i].value = shapes[id][propsList[i]];
                }else{
                    if (shapes[id][propsList[i]].length == 0){
                        propInputs[i].value = 1;
                    }else if (shapes[id][propsList[i]].length - 1 < iterations){
                        propInputs[i].value = shapes[id][propsList[i]][iterations - 1];
                    }else{
                        propInputs[i].value = shapes[id][propsList[i]][iterations];
                    }
                }
                
            }
        }


        function emptysvgProps(){
            var propInputs = document.getElementById("svgProps").getElementsByClassName("propInput");
            for(i=0;i<propInputs.length;i++){
                propInputs[i].value = null;
            }
        }

        function insertShape(mShape) {

            //Create Element
            var shape = document.createElement("div");
            
            var shapeHeight = mShape.height/100*containerHeight;
            var shapeWidth = mShape.width/100*containerWidth;
            var shapeColor = mShape.color;
            var shapeText = mShape.t;

            mSVG[mShape.type](shape, shapeHeight,shapeWidth,shapeColor);

            //Get Position /// 100 * containerWidth/ 100 * containerHeight- mShape.width / 2- mShape.height / 2
            var xP = mShape.allignX  ;
            var yP = mShape.allignY  ;

            //Create Transform Value
            var transformValue = "translate3d(" + xP + "px," + yP + "px,0)";

            //Implement Properties to element
            shape.style.position = "absolute";
            shape.style.transform = transformValue;

            //Set onMousedown function
            shape.onmousedown = function (e) {
                //Turn off Annimation
                this.style.transition = "";
                //Set z value
                this.style.zIndex = ++top_z;
                //Set Offsets
                offSetX = e.clientX;
                offSetY = e.clientY;
                //Calculate Walls
                var shapeRect = shape.getBoundingClientRect();
                wallLeft = e.clientX - shapeRect.left;
                wallRight = shapeRect.right - e.clientX;
                wallTop = e.clientY - shapeRect.top;
                wallBottom = shapeRect.bottom - e.clientY;

                //Set Last X and Y
                lastX = e.clientX;
                lastY = e.clientY;

                //Set Mouse Tracker to ON
                TRACKER = mShape.id;

                //Fill Props
                fillsvgProps(mShape.id);
                shapeEdit = mShape.id;
            }

            shape.ontouchstart = function (e) {
                e.preventDefault();
                //Turn off Annimation
                this.style.transition = "";
                //console.log("mouseDown");
                //Set z value
                this.style.zIndex = ++top_z;
                //Set Offsets
                offSetX = e.touches[0].clientX;
                offSetY = e.touches[0].clientY;
                //Calculate Walls
                var shapeRect = shape.getBoundingClientRect();
                wallLeft = e.clientX - shapeRect.left;
                wallRight = shapeRect.right - e.clientX;
                wallTop = e.clientY - shapeRect.top;
                wallBottom = shapeRect.bottom - e.clientY;

                //Set Last X and Y
                lastX = e.touches[0].clientX;
                lastY = e.touches[0].clientY;

                //Set Mouse Tracker to ON
                TRACKER = mShape.id;

                //Fill Props
                fillsvgProps(mShape.id);
                shapeEdit = mShape.id;
            }


            //Implement Shape
            container.appendChild(shape);
            shapeElements.push(shape);

            //Set Alligns  
            mShape.allignX = round(xP, 3);
            mShape.allignY = round(yP, 3);

        }

        document.addEventListener("mouseup", endDrag);
        document.addEventListener("mousemove", drag);

        document.addEventListener("touchend", endDrag);
        document.addEventListener("touchmove", touchDrag);

        function endDrag(e) {

            if (TRACKER != -1) {
                var shapeRect = shapeElements[TRACKER].getBoundingClientRect();
                shapes[TRACKER].allignX = shapeRect.left - containerOffSetLeft;
                shapes[TRACKER].allignY = shapeRect.top - containerOffSetTop;
                TRACKER = -1;
            }
        }

        function drag(e) {

            if (TRACKER != -1) {
                var shapeRect = shapeElements[TRACKER].getBoundingClientRect();

                if ((shapeRect.left <= containerRect.left || e.clientX <= containerRect.left) && shapes[TRACKER].lastX > e.clientX) {
                    var xPosition = containerRect.left - containerOffSetLeft;
                } else if (shapeRect.left <= containerRect.left && e.clientX - containerRect.left < wallLeft) {
                    var xPosition = containerRect.left - containerOffSetLeft;
                } else if ((shapeRect.right >= containerRect.right || e.clientX >= containerRect.right) && lastX < e.clientX) {
                    var xPosition = containerRect.right - containerOffSetLeft - (shapeRect.right - shapeRect.left);
                } else if (shapeRect.right >= containerRect.right && containerRect.right - e.clientX < wallRight) {
                    var xPosition = containerRect.right - containerOffSetLeft - (shapeRect.right - shapeRect.left);
                } else {
                    var xPosition = e.clientX - offSetX + shapes[TRACKER].allignX;
                }

                if ((shapeRect.top <= containerRect.top || e.clientY <= containerRect.top) && lastY > e.clientY) {
                    var yPosition = containerRect.top - containerOffSetTop;
                } else if (shapeRect.top <= containerRect.top && e.clientY - containerRect.top < wallTop) {
                    var yPosition = containerRect.top - containerOffSetTop;
                } else if ((shapeRect.bottom >= containerRect.bottom || e.clientY >= containerRect.bottom) && lastY < e.clientY) {
                    var yPosition = containerRect.bottom - containerOffSetTop - (shapeRect.bottom - shapeRect.top);
                } else if (shapeRect.bottom >= containerRect.bottom && containerRect.bottom - e.clientY < wallBottom) {
                    var yPosition = containerRect.bottom - containerOffSetTop - (shapeRect.bottom - shapeRect.top);

                } else {
                    var yPosition = e.clientY - offSetY + shapes[TRACKER].allignY;
                }
                
                if(shapes[TRACKER].scaleX.length <= iterations){
                    var sX = 1;
                    var sY = 1;
                }else{
                    var sX = shapes[TRACKER].scaleX[testIteration];
                    var sY = shapes[TRACKER].scaleY[testIteration];
                }
                var translate3dValue = "translate3d(" + xPosition + "px," + yPosition + "px,0) scale(" + sX + "," + sY + ")";
                shapeElements[TRACKER].style.transform = translate3dValue;



                lastX = e.clientX;
                lastY = e.clientY;

            }
        }

        function touchDrag(e) {

            if (TRACKER != -1) {

                var shapeRect = shapeElements[TRACKER].getBoundingClientRect();

                if ((shapeRect.left <= containerRect.left || e.touches[0].clientX <= containerRect.left) && shapes[TRACKER].lastX > e.touches[0].clientX) {
                    var xPosition = containerRect.left - containerOffSetLeft;
                } else if (shapeRect.left <= containerRect.left && e.touches[0].clientX - containerRect.left < wallLeft) {
                    var xPosition = containerRect.left - containerOffSetLeft;
                } else if ((shapeRect.right >= containerRect.right || e.touches[0].clientX >= containerRect.right) && lastX < e.touches[0].clientX) {
                    var xPosition = containerRect.right - containerOffSetLeft - shapes[TRACKER].width;
                } else if (shapeRect.right >= containerRect.right && containerRect.right - e.touches[0].clientX < wallRight) {
                    var xPosition = containerRect.right - containerOffSetLeft - shapes[TRACKER].height;
                } else {
                    var xPosition = e.touches[0].clientX - offSetX + shapes[TRACKER].allignX;
                }

                if ((shapeRect.top <= containerRect.top || e.touches[0].clientY <= containerRect.top) && lastY > e.touches[0].clientY) {
                    var yPosition = containerRect.top - containerOffSetTop;
                } else if (shapeRect.top <= containerRect.top && e.touches[0].clientY - containerRect.top < wallTop) {
                    var yPosition = containerRect.top - containerOffSetTop;
                } else if ((shapeRect.bottom >= containerRect.bottom || e.touches[0].clientY >= containerRect.bottom) && lastY < e.touches[0].clientY) {
                    var yPosition = containerRect.bottom - containerOffSetTop - shapes[TRACKER].width;
                } else if (shapeRect.bottom >= containerRect.bottom && containerRect.bottom - e.touches[0].clientY < wallBottom) {
                    var yPosition = containerRect.bottom - containerOffSetTop - shapes[TRACKER].height;

                } else {
                    var yPosition = e.touches[0].clientY - offSetY + shapes[TRACKER].allignY;
                }

                var translate3dValue = "translate3d(" + xPosition + "px," + yPosition + "px,0)";
                shapeElements[TRACKER].style.transform = translate3dValue;


                lastX = e.touches[0].clientX;
                lastY = e.touches[0].clientY;

            }
        }

        function save() {
            emptysvgProps();
            iterations++;
            iterationDisplay.innerHTML = iterations;
            totalIterationsDisplay.innerHTML = iterations;
            for (i = 0; i < shapes.length; i++) {

                //X and Y
                var shapeRect = shapeElements[i].getBoundingClientRect();
                shapes[i].x.push(round((shapeRect.left-containerOffSetLeft)/containerWidth*100, 2));
                shapes[i].y.push(round((shapeRect.top-containerOffSetTop)/containerHeight*100, 2));
                //Visibility
                if(shapes[i].visible.length -1 < iterations && iterations > 1){
                   shapes[i].visible.push(shapes[i].visible[shapes[i].visible.length-1]);
         
                }else if(shapes[i].visible.length < iterations && iterations == 1){
                    shapes[i].visible.push(1);
            
                }

                //scaleX
                if(shapes[i].scaleX.length < iterations && iterations > 1){
                   shapes[i].scaleX.push(shapes[i].scaleX[shapes[i].scaleX.length-1]);
                }else if(shapes[i].scaleX.length < iterations){
                    shapes[i].scaleX.push(1);
                }

                //scaleY
                if(shapes[i].scaleY.length < iterations && iterations > 1){
                   shapes[i].scaleY.push(shapes[i].scaleY[shapes[i].scaleY.length-1]);
                }else if(shapes[i].scaleY.length < iterations && iterations == 1){
                    shapes[i].scaleY.push(1);
                }

                //Rotate
                if(shapes[i].rotate.length < iterations && iterations > 1){
                   shapes[i].rotate.push(shapes[i].rotate[shapes[i].rotate.length-1]);
                }else if(shapes[i].rotate.length < iterations && iterations == 1){
                    shapes[i].rotate.push(1);
                }
            }
        }

        function editSave(){
            emptysvgProps();
            for (i = 0; i < shapes.length; i++) {
                //X and Y
                var shapeRect = shapeElements[i].getBoundingClientRect();
                shapes[i].x[testIteration-1] = round((shapeRect.left-containerOffSetLeft)/containerWidth*100, 2);
                shapes[i].y[testIteration-1] = round((shapeRect.top-containerOffSetTop)/containerHeight*100, 2);
            }
        }

        function setShape(){

            //Grab Prob Values
            var propInputs = document.getElementById("svgProps").getElementsByClassName("propInput");

            //Visibility
            if(shapes[setId].visible.length < iterations){
                shapes[setId].visible.push(parseFloat(propInputs[0].value));
            }else{
                shapes[setId].visible[iterations] = parseFloat(propInputs[0].value);
            }

            //ScaleX
            if(shapes[setId].scaleX.length < iterations){
                shapes[setId].scaleX.push(parseFloat(propInputs[2].value));
            }else{
                shapes[setId].scaleX[iterations] = parseFloat(propInputs[2].value);
            }

            //ScaleY
            if(shapes[setId].scaleY.length < iterations){
                shapes[setId].scaleY.push(parseFloat(propInputs[3].value));
            }else{
                shapes[setId].scaleY[iterations] = parseFloat(propInputs[3].value);
            }

            //Rotate
            if(shapes[setId].rotate.length < iterations){
                shapes[setId].rotate.push(parseFloat(propInputs[4].value));
            }else{
                shapes[setId].rotate[iterations] = parseFloat(propInputs[4].value);
            }


            console.log(shapes[setId].scaleX[iterations]);
            pullElement(setId,shapes[setId].allignX,shapes[setId].allignY, shapes[setId].scaleX[iterations], shapes[setId].scaleY[iterations], shapes[setId].visible[iterations],shapes[setId].rotate[iterations]);
            
            
        }

        function editSetShape(){

            //Grab Prob Values
            var propInputs = document.getElementById("svgProps").getElementsByClassName("propInput");

            //Visible
            shapes[setId].visible[testIteration - 1] = parseFloat(propInputs[0].value);

            //ScaleX
            shapes[setId].scaleX[testIteration - 1] = parseFloat(propInputs[2].value);
            
            //ScaleY
            shapes[setId].scaleY[testIteration - 1] = parseFloat(propInputs[3].value);

            //Rotate
            shapes[setId].rotate[testIteration - 1] = parseFloat(propInputs[4].value);
            
            pullElement(setId,shapes[setId].allignX,shapes[setId].allignY, shapes[setId].scaleX[iterations], shapes[setId].scaleY[iterations], shapes[setId].visible[iterations]);

        }

        function objectExport() {
            emptysvgProps();
            console.log(JSON.stringify(shapes,null,4));
        }

        function seriesTest() {
            emptysvgProps();
            if (testIteration == iterations) {
                testIteration = 0;
            }
    
            for (i = 0; i < shapes.length; i++) {
                pullElement(i, shapes[i].x[testIteration]/100*containerWidth, shapes[i].y[testIteration]/100*containerHeight,shapes[i].scaleX[testIteration],shapes[i].scaleY[testIteration],shapes[i].visible[testIteration],shapes[i].rotate[testIteration]);
            }

            iterationDisplay.innerHTML = testIteration + 1;
            testIteration++;
        }

        function seriesTestBack() {
            emptysvgProps();
            testIteration--;
            if (testIteration < 0) {
                testIteration = iterations - 1;
            }
            
            for (i = 0; i < shapes.length; i++) {
                pullElement(i, shapes[i].x[testIteration]/100*containerWidth, shapes[i].y[testIteration]/100*containerHeight,shapes[i].scaleX[testIteration],shapes[i].scaleY[testIteration],shapes[i].visible[testIteration],shapes[i].rotate[testIteration]);
            }

            iterationDisplay.innerHTML = testIteration + 1;
            
        }

        function pullElement(id, mXP, mYP, mWP, mHP,mV, mR) {

            //Turn on Annimation 
            shapeElements[id].style.transition = "transform .3s cubic-bezier(.4,0,.6,1), opacity .6s linear";

            //Adjust for Rotation
            var mWPa = 2*(mWP*Math.cos(mR) + mHP*Math.sin(mR));
            var mHPa = mHP*Math.cos(mR) + mWP*Math.sin(mR);

            //Create Translate String
            var translate3dValue = "translate3d(" + mXP + "px," + mYP + "px,0px) scale(" + mWP + "," + mHP + ") rotate(" + mR + "deg)";

            //Transform Element
            shapeElements[id].style.transform = translate3dValue;

            //Set Opacity
            shapeElements[id].style.opacity = mV.toString();

            //Reset alligns
            shapes[id].allignX = mXP;
            shapes[id].allignY = mYP;


        }

        function round(num, scale) {
            if (!("" + num).includes("e")) {
                return +(Math.round(num + "e+" + scale) + "e-" + scale);
            } else {
                var arr = ("" + num).split("e");
                var sig = ""
                if (+arr[1] + scale > 0) {
                    sig = "+";
                }
                return +(Math.round(+arr[0] + "e" + sig + (+arr[1] + scale)) + "e-" + scale);
            }
        }

        function viewAll(){
            for(i=0;i<shapes.length;i++){
                pullElement(i, shapes[i].allignX, shapes[i].allignY, shapes[i].scaleX[testIteration],shapes[i].scaleY[testIteration],1,shapes[i].rotate[testIteration]);
            }
        }
        

    </script>



</body>

</html>