<!doctype html>

<html>

<head>
    <style type="text/css">
        #draw {
            height: 600px;
            width: 600px;
            background: #F8F9F9;
        }
    </style>
    
</head>

<body>

    <div id="draw"></div>



    <script>

        var on = 0;
        var sw = 2;
        var drawDiv = document.getElementById("draw");
        drawDiv.style.cursor = "crosshair";

        var offSetLeft = drawDiv.offsetLeft + drawDiv.scrollLeft + drawDiv.clientLeft;
        var offSetTop = drawDiv.offsetTop + drawDiv.scrollTop + drawDiv.clientTop;

        console.log(offSetLeft,offSetTop);

        pointsString = "";

        var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute('width', 600 + "px");
        svg.setAttribute('height', 600 + "px");
        var svgNS = svg.namespaceURI;


        drawDiv.addEventListener('mousedown', mouseDown);
        document.addEventListener('mouseup', mouseUp);
        document.addEventListener('mousemove', mouseMove);

        function update(mPointsString){
            var polyLine = document.createElementNS(svgNS, 'polyline');
            polyLine.setAttribute('points', mPointsString);
            polyLine.setAttribute('fill', 'none');
            polyLine.setAttribute('stroke', 'rgb(72, 255, 0)');
            polyLine.setAttribute('stroke-width', "3");

            svg.appendChild(polyLine);

            drawDiv.appendChild(svg)
        }

        

        function mouseDown(){
            on = 1;
        }

        function mouseUp(){
            on = 0;
            pointsString = "";

        }

        function mouseMove(e){
            if(on == 1){
                if(sw == 2){
                    var x = e.clientX - offSetLeft;
                    var y = e.clientY - offSetTop;
                    pointsString = pointsString + " " + x + "," + y;
                    drawDiv.innerHTML = null;
                    update(pointsString);
                    sw = 0;
                }
                sw++;
            }
        }

    </script>
</body>

</html>

